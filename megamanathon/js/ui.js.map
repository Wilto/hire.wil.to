{
  "version": 3,
  "sources": ["../../src/js/menu.js", "../../src/js/bundle.js"],
  "sourcesContent": ["export default function() {\n  const toggleEls = document.querySelectorAll( '[aria-haspopup]' ),\n    init = ( el ) => { \n      el.addEventListener( 'click', toggleStates );\n      document.addEventListener( 'keyup', keyHandler );\n    },\n    closeTop = ( e ) => {\n      const openToggle = document.querySelector( '[aria-haspopup][aria-expanded=\"true\"]' );\n      let targetEl;\n\n      if( openToggle ) {\n        targetEl = openToggle.closest( '.menu' ).querySelector( '[role=\"menu\"]' );\n\n        // If another menu is open, close it:\n        targetEl.setAttribute( 'aria-hidden', true );\n        openToggle.setAttribute( 'aria-expanded', false );\n      }\n    },\n    clickOut = ( e ) => {\n      const openToggle = document.querySelector( '[aria-haspopup][aria-expanded=\"true\"]' ),\n        openTarget = document.querySelector( '.flyout[aria-hidden=\"false\"]' );\n      let targetEl;\n\n      e.stopPropagation();\n      if( !openTarget ) { return; }\n      if( !openTarget.contains( e.target ) && !openToggle.contains( e.target ) ) {\n        closeTop( e );\n      }\n    },\n    keyHandler = ( e ) => {\n      const current = document.activeElement,\n          openWrap = document.querySelectorAll( '[aria-hidden=\"false\"][role=\"menu\"]' ),\n          parentWrap = current.closest( '.menu' ),\n          resultList = parentWrap && parentWrap.querySelector( '[role=\"menu\"]' ),\n          matchedSibling = ( el, sel, dir ) => {\n            let sibEl = el[ dir + \"ElementSibling\" ];\n\n            while( sibEl ) {\n              if( sibEl.matches( sel ) ) {\n                return sibEl;\n              }\n              sibEl = sibEl[ dir + \"ElementSibling\" ];\n            }\n          };\n      let moveTo;\n\n      if( !current || !openWrap ) {\n        return;\n      }\n           \n      if( e.key === \"Escape\" ){\n        closeTop( e, true );\n\n        // If focus is currently inside a menu, return focus to the trigger:\n        if( parentWrap ) {\n          parentWrap.querySelector( '[aria-haspopup=\"true\"]' ).focus();   \n        }\n        return;\n      }\n       \n      switch( e.key ) {\n        case \"ArrowDown\":\n        case \"ArrowRight\":\n          // Move focus to the next menu item, or jump to the first at the end of the list.\n          moveTo = matchedSibling( current, '[role=\"menuitem\"]', 'next' ) || resultList.querySelector( '[role=\"menuitem\"]:first-of-type' );\n          break;\n        case \"ArrowUp\":\n        case \"ArrowLeft\":\n          // Move focus to the previous menu item, or jump to the last at the start of the list.\n          moveTo = matchedSibling( current, '[role=\"menuitem\"]', 'previous' ) || resultList.querySelector( '[role=\"menuitem\"]:last-of-type' )\n          break;\n      }\n      if( moveTo !== undefined ) {\n        moveTo.focus();\n        moveTo.parentNode.querySelectorAll( \"[tabindex]\" ).forEach( el => el.setAttribute( \"tabindex\", \"-1\" ) );\n        moveTo.setAttribute( \"tabindex\", \"0\" );\n        e.preventDefault();\n      }\n    },\n    toggleStates = function() {\n      const target = this.closest(\".menu\").querySelector( '[role=\"menu\"]' ),\n        nowCollapsed = this.getAttribute( 'aria-expanded' ) === \"true\",\n        firstElement = target.querySelector( '[role=\"menuitem\"]:first-of-type' );\n\n      /* Swap the states of the toggle element and the target element on user interaction: */\n      target.setAttribute( 'aria-hidden', nowCollapsed );\n      this.setAttribute( 'aria-expanded', !nowCollapsed );\n      \n      if( !nowCollapsed ) {\n        // Tab should focus the first menu item if the user hasn't interacted with the menu yet:\n        if( target.querySelectorAll( '[tabindex=\"0\"]' ).length === 0 ) {\n          target.querySelectorAll( '[role=\"menuitem\"]' ).forEach( el => el.setAttribute( \"tabindex\", \"-1\" ) );\n          firstElement.setAttribute( \"tabindex\", \"0\" );\n        }\n      }\n    };\n\n  // Handle click outside a toggle or active disclosed content:\n  document.addEventListener( 'click', clickOut );\n\n  toggleEls.forEach( el => { \n    init( el );\n  });\n\n};", "// imports go here\nimport menu from './menu.js';\n\nmenu();"],
  "mappings": ";;AAAe,WAAR,eAAmB;AACxB,UAAM,YAAY,SAAS,iBAAkB,iBAAkB,GAC7D,OAAO,CAAE,OAAQ;AACf,SAAG,iBAAkB,SAAS,YAAa;AAC3C,eAAS,iBAAkB,SAAS,UAAW;AAAA,IACjD,GACA,WAAW,CAAE,MAAO;AAClB,YAAM,aAAa,SAAS,cAAe,uCAAwC;AACnF,UAAI;AAEJ,UAAI,YAAa;AACf,mBAAW,WAAW,QAAS,OAAQ,EAAE,cAAe,eAAgB;AAGxE,iBAAS,aAAc,eAAe,IAAK;AAC3C,mBAAW,aAAc,iBAAiB,KAAM;AAAA,MAClD;AAAA,IACF,GACA,WAAW,CAAE,MAAO;AAClB,YAAM,aAAa,SAAS,cAAe,uCAAwC,GACjF,aAAa,SAAS,cAAe,8BAA+B;AACtE,UAAI;AAEJ,QAAE,gBAAgB;AAClB,UAAI,CAAC,YAAa;AAAE;AAAA,MAAQ;AAC5B,UAAI,CAAC,WAAW,SAAU,EAAE,MAAO,KAAK,CAAC,WAAW,SAAU,EAAE,MAAO,GAAI;AACzE,iBAAU,CAAE;AAAA,MACd;AAAA,IACF,GACA,aAAa,CAAE,MAAO;AACpB,YAAM,UAAU,SAAS,eACrB,WAAW,SAAS,iBAAkB,oCAAqC,GAC3E,aAAa,QAAQ,QAAS,OAAQ,GACtC,aAAa,cAAc,WAAW,cAAe,eAAgB,GACrE,iBAAiB,CAAE,IAAI,KAAK,QAAS;AACnC,YAAI,QAAQ,GAAI,MAAM,gBAAiB;AAEvC,eAAO,OAAQ;AACb,cAAI,MAAM,QAAS,GAAI,GAAI;AACzB,mBAAO;AAAA,UACT;AACA,kBAAQ,MAAO,MAAM,gBAAiB;AAAA,QACxC;AAAA,MACF;AACJ,UAAI;AAEJ,UAAI,CAAC,WAAW,CAAC,UAAW;AAC1B;AAAA,MACF;AAEA,UAAI,EAAE,QAAQ,UAAU;AACtB,iBAAU,GAAG,IAAK;AAGlB,YAAI,YAAa;AACf,qBAAW,cAAe,wBAAyB,EAAE,MAAM;AAAA,QAC7D;AACA;AAAA,MACF;AAEA,cAAQ,EAAE,KAAM;AAAA,QACd,KAAK;AAAA,QACL,KAAK;AAEH,mBAAS,eAAgB,SAAS,qBAAqB,MAAO,KAAK,WAAW,cAAe,iCAAkC;AAC/H;AAAA,QACF,KAAK;AAAA,QACL,KAAK;AAEH,mBAAS,eAAgB,SAAS,qBAAqB,UAAW,KAAK,WAAW,cAAe,gCAAiC;AAClI;AAAA,MACJ;AACA,UAAI,WAAW,QAAY;AACzB,eAAO,MAAM;AACb,eAAO,WAAW,iBAAkB,YAAa,EAAE,QAAS,QAAM,GAAG,aAAc,YAAY,IAAK,CAAE;AACtG,eAAO,aAAc,YAAY,GAAI;AACrC,UAAE,eAAe;AAAA,MACnB;AAAA,IACF,GACA,eAAe,WAAW;AACxB,YAAM,SAAS,KAAK,QAAQ,OAAO,EAAE,cAAe,eAAgB,GAClE,eAAe,KAAK,aAAc,eAAgB,MAAM,QACxD,eAAe,OAAO,cAAe,iCAAkC;AAGzE,aAAO,aAAc,eAAe,YAAa;AACjD,WAAK,aAAc,iBAAiB,CAAC,YAAa;AAElD,UAAI,CAAC,cAAe;AAElB,YAAI,OAAO,iBAAkB,gBAAiB,EAAE,WAAW,GAAI;AAC7D,iBAAO,iBAAkB,mBAAoB,EAAE,QAAS,QAAM,GAAG,aAAc,YAAY,IAAK,CAAE;AAClG,uBAAa,aAAc,YAAY,GAAI;AAAA,QAC7C;AAAA,MACF;AAAA,IACF;AAGF,aAAS,iBAAkB,SAAS,QAAS;AAE7C,cAAU,QAAS,QAAM;AACvB,WAAM,EAAG;AAAA,IACX,CAAC;AAAA,EAEH;;;ACrGA,eAAK;",
  "names": []
}
